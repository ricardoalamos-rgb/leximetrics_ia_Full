Loaded PjudScraper from: /Users/ricardoalamossantacruz/Desktop/Antigravity/leximetrics-ia/services/scraper-service/app/scraper/pjud.py
sys.path: ['/Users/ricardoalamossantacruz/Desktop/Antigravity/leximetrics-ia/services/scraper-service', '/Library/Frameworks/Python.framework/Versions/3.14/lib/python314.zip', '/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14', '/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/lib-dynload', '/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/site-packages', '/Users/ricardoalamossantacruz/Desktop/Antigravity/leximetrics-ia/services/scraper-service/app']
Starting Scraper Verification...

--- 1. Testing Login with Clave Única ---
Navegando a OJV...
Verificando modal...
Cerrando modal...
Click en Clave Única...
Esperando redirección a Clave Única...
Intentando obtener URL de Clave Única...
Link attributes - href: #, onclick: getURL()
Analizando función getURL()...
getURL definition: function getURL() {
                $.ajax({
                url: "../claveunica/loginurl?ts=" + new Date().getTime(),
                    type: 'get'
                }).done(function (data) {
                    if (data != null) {
                        window.location.href="https://accounts.claveunica.gob.cl/api/v1/accounts/app/logout";
                        setTimeout(function(){
                            window.location.href = data;
                        }, 800);
                    }
                });
            }
URL actual tras getURL: https://accounts.claveunica.gob.cl/accounts/login/?next=/openid/authorize%3Fclient_id%3Dae4caa1cb2154cac89440f3fe18251cb%26redirect_uri%3Dhttps%253A%252F%252Fojv.pjud.cl%252Fkpitec-ojv-web%252Fclaveunica%252Fcallback%26response_type%3Dcode%26scope%3Dopenid%2Brun%2Bname%26state%3Dh%252FKper6QCIsnG%252FTDJhhVtg%253D%253D
Navegación exitosa (detectada tras sleep).
Llenando credenciales...
Click en INGRESA...
Botón sigue deshabilitado, intentando forzar habilitación...
Esperando redirección post-login...
Verificando carga del dashboard...
Modal de roles sigue visible (intento 2), reintentando selección...
Dashboard cargado exitosamente.
Items del sidebar detectados:  Trámite Fácil
 Mantenedor
 Ingresar Demanda/Recurso
 Ingresar Escrito
 Ingresar Contesta Oficio
 Ba...
Login exitoso con Clave Única
✅ Login successful.

--- 2. Testing Navigation to 'Mis Causas' ---
Navegando a Mis Causas...
Verificando popups bloqueantes...
Contenido del sidebar:  Trámite Fácil
 Mantenedor
 Ingresar Demanda/Recurso
 Ingresar Escrito
 Ingresar Contesta Oficio
 Bandeja Demandas/Recursos
 Bandeja Escrito
 Indicadores
Informativo:
A contar del 07 de Septiembre de 2025, la hora visualizada corresponde al horario de verano establecido en Chile Continental. Para Chile Insular Occidental, Isla de Pascua e Isla Salas y Gómez restar 2 horas. Para más información consulte http://www.horaoficial.cl
ADVERTENCIA: 'Mis Causas' no encontrado en sidebar.
❌ Failed to navigate to Mis Causas.

--- 4. Testing Navigation to 'Ingreso de Demandas' ---
Navegando a Ingreso de Demandas...
Verificando popups bloqueantes...
✅ Navigated to Ingreso de Demandas.

--- 5. Testing Form Filling in 'Ingreso de Demandas' ---
Method signature: (competencia='Civil', procedimiento='Ordinario', materia='Cobro')
Traceback (most recent call last):
  File "/Users/ricardoalamossantacruz/Desktop/Antigravity/leximetrics-ia/services/scraper-service/verify_scraper.py", line 59, in <module>
    asyncio.run(main())
    ~~~~~~~~~~~^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 204, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py", line 127, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py", line 719, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/Users/ricardoalamossantacruz/Desktop/Antigravity/leximetrics-ia/services/scraper-service/verify_scraper.py", line 52, in main
    await scraper.ingreso_demanda(file_path="mock_document.pdf")
          ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: PjudScraper.ingreso_demanda() got an unexpected keyword argument 'file_path'
